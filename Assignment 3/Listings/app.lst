


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             AsmTemplate, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000         
    4 00000000         ; sample program makes the 4 LEDs P1.16, P1.17, P1.18, P
                       1.19 go on and off in sequence
    5 00000000         ; (c) Mike Brady, 2011 -- 2019.
    6 00000000         
    7 00000000                 EXPORT           start
    8 00000000         start
    9 00000000         
   10 00000000 E0028010 
                       IO1PIN  EQU              0xE0028010
   11 00000000 E0028018 
                       IO1DIR  EQU              0xE0028018
   12 00000000 E0028014 
                       IO1SET  EQU              0xE0028014
   13 00000000 E002801C 
                       IO1CLR  EQU              0xE002801C
   14 00000000         
   15 00000000 E59F10B4        ldr              r1,=IO1DIR
   16 00000004 E3A0280F        ldr              r2,=0x000f0000 ;select P1.19--P
                                                            1.16
   17 00000008 E5812000        str              r2,[r1]     ;make them outputs
   18 0000000C E59F10AC        ldr              r1,=IO1SET
   19 00000010 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
   20 00000014         
   21 00000014         ;R12 - number we are currently working on
   22 00000014 E3A0C000        mov              r12, #0
   23 00000018         mainloop
   24 00000018 EB000013        bl               press
   25 0000001C E3500000        cmp              r0, #0
   26 00000020 0A000002        beq              endSwitch
   27 00000024 E3500501        cmp              r0, #0x00400000
   28 00000028 AA000001        bge              numberChange
   29 0000002C EA000003        b                operatorChange
   30 00000030         endSwitch
   31 00000030 EAFFFFF8        b                mainloop
   32 00000034         
   33 00000034         numberChange
   34 00000034 EB000005        bl               numberChangeSub
   35 00000038 E1A0100C        mov              r1, r12
   36 0000003C EAFFFFFB        b                endSwitch
   37 00000040         
   38 00000040         operatorChange
   39 00000040 EB000009        bl               operatorChangeSub
   40 00000044 E1A0100C        mov              r1, r12
   41 00000048 EAFFFFF8        b                endSwitch
   42 0000004C         
   43 0000004C EAFFFFFE 
                       stop    B                stop
   44 00000050         
   45 00000050         ;R0 - button pressed
   46 00000050         ;R1 - current number
   47 00000050         numberChangeSub
   48 00000050 E92D4003        stmfd            sp!, {r0-r1, lr}
   49 00000054 E3500702        cmp              r0, #0x0080000
   50 00000058 0A000000        beq              adding
   51 0000005C         ;subtracting



ARM Macro Assembler    Page 2 


   52 0000005C E2411001        sub              r1, r1, #1
   53 00000060         adding
   54 00000060 E2811001        add              r1, r1, #1
   55 00000064 EB00000C        bl               updateDisplay
   56 00000068 E8BD8003        ldmfd            sp!, {r0-r1, pc}
   57 0000006C         
   58 0000006C         operatorChangeSub
   59 0000006C         
   60 0000006C         press
   61 0000006C E92D4003        stmfd            sp!, {r0-r1, lr}
   62 00000070 E59F004C        ldr              r0, =IO1PIN
   63 00000074 E5900000        ldr              r0, [r0]
   64 00000078 E3A0160F        ldr              r1, =0x00f00000
   65 0000007C E0000001        and              r0, r0, r1
   66 00000080 E1E00000        mvn              r0, r0
   67 00000084 E0000001        and              r0, r0, r1
   68 00000088 E8BD8003        ldmfd            sp!, {r0-r1, pc}
   69 0000008C         
   70 0000008C         clearDisplay
   71 0000008C E92D40FF        stmfd            sp!, {r0-r7, lr}
   72 00000090 E59F1028        ldr              r1,=IO1SET
   73 00000094 E5810000        str              r0,[r1]     ;set them to turn t
                                                            he LEDs off
   74 00000098 E8BD80FF        ldmfd            sp!, {r0-r7, pc}
   75 0000009C         
   76 0000009C         updateDisplay
   77 0000009C E92D40FF        stmfd            sp!, {r0-r7, lr}
   78 000000A0 E1A00801        mov              r0, r1, lsl #16
   79 000000A4 E59F1014        ldr              r1,=IO1SET
   80 000000A8 E3A0280F        mov              r2, #0x000f0000
   81 000000AC E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
   82 000000B0 E59F1010        ldr              r1,=IO1CLR
   83 000000B4 E5810000        str              r0,[r1]     ;turn on the LED's
   84 000000B8 E8BD80FF        ldmfd            sp!, {r0-r7, pc}
   85 000000BC         
   86 000000BC                 END
              E0028018 
              E0028014 
              E0028010 
              E002801C 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Ke
il_v5\ARM\Inc\Philips --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 
1" --predefine="__UVISION_VERSION SETA 516" --list=.\listings\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

AsmTemplate 00000000

Symbol: AsmTemplate
   Definitions
      At line 1 in file App.s
   Uses
      None
Comment: AsmTemplate unused
adding 00000060

Symbol: adding
   Definitions
      At line 53 in file App.s
   Uses
      At line 50 in file App.s
Comment: adding used once
clearDisplay 0000008C

Symbol: clearDisplay
   Definitions
      At line 70 in file App.s
   Uses
      None
Comment: clearDisplay unused
endSwitch 00000030

Symbol: endSwitch
   Definitions
      At line 30 in file App.s
   Uses
      At line 26 in file App.s
      At line 36 in file App.s
      At line 41 in file App.s

mainloop 00000018

Symbol: mainloop
   Definitions
      At line 23 in file App.s
   Uses
      At line 31 in file App.s
Comment: mainloop used once
numberChange 00000034

Symbol: numberChange
   Definitions
      At line 33 in file App.s
   Uses
      At line 28 in file App.s
Comment: numberChange used once
numberChangeSub 00000050

Symbol: numberChangeSub
   Definitions
      At line 47 in file App.s
   Uses
      At line 34 in file App.s
Comment: numberChangeSub used once
operatorChange 00000040



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: operatorChange
   Definitions
      At line 38 in file App.s
   Uses
      At line 29 in file App.s
Comment: operatorChange used once
operatorChangeSub 0000006C

Symbol: operatorChangeSub
   Definitions
      At line 58 in file App.s
   Uses
      At line 39 in file App.s
Comment: operatorChangeSub used once
press 0000006C

Symbol: press
   Definitions
      At line 60 in file App.s
   Uses
      At line 24 in file App.s
Comment: press used once
start 00000000

Symbol: start
   Definitions
      At line 8 in file App.s
   Uses
      At line 7 in file App.s
Comment: start used once
stop 0000004C

Symbol: stop
   Definitions
      At line 43 in file App.s
   Uses
      At line 43 in file App.s
Comment: stop used once
updateDisplay 0000009C

Symbol: updateDisplay
   Definitions
      At line 76 in file App.s
   Uses
      At line 55 in file App.s
Comment: updateDisplay used once
13 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

IO1CLR E002801C

Symbol: IO1CLR
   Definitions
      At line 13 in file App.s
   Uses
      At line 82 in file App.s
Comment: IO1CLR used once
IO1DIR E0028018

Symbol: IO1DIR
   Definitions
      At line 11 in file App.s
   Uses
      At line 15 in file App.s
Comment: IO1DIR used once
IO1PIN E0028010

Symbol: IO1PIN
   Definitions
      At line 10 in file App.s
   Uses
      At line 62 in file App.s
Comment: IO1PIN used once
IO1SET E0028014

Symbol: IO1SET
   Definitions
      At line 12 in file App.s
   Uses
      At line 18 in file App.s
      At line 72 in file App.s
      At line 79 in file App.s

4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 2 in file App.s
   Uses
      None
Comment: main unused
1 symbol
353 symbols in table
